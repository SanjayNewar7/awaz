<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <com.google.android.material.appbar.AppBarLayout
        android:id="@+id/appBarLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar">

        <!-- Collapsing Profile Header -->
        <com.google.android.material.appbar.CollapsingToolbarLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:layout_scrollFlags="scroll|exitUntilCollapsed"
            app:contentScrim="@color/blue_primary">

            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@color/blue_primary"
                android:padding="16dp"
                app:layout_collapseMode="parallax">

                <!-- Back Arrow -->
                <ImageView
                    android:id="@+id/backArrow"
                    android:layout_width="24dp"
                    android:layout_height="24dp"
                    android:src="@drawable/back_white"
                    android:layout_alignParentStart="true"
                    android:layout_alignParentTop="true"
                    android:contentDescription="Back" />

                <!-- Profile Section -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_below="@id/backArrow"
                    android:layout_marginTop="16dp"
                    android:orientation="vertical"
                    android:gravity="center_horizontal">


                    <FrameLayout
                        android:layout_width="120dp"
                        android:layout_height="120dp">

                    <com.google.android.material.imageview.ShapeableImageView
                        android:id="@+id/profile_image"
                        android:layout_width="120dp"
                        android:layout_height="120dp"
                        app:shapeAppearanceOverlay="@style/CircleImageView"
                        android:layout_gravity="center"
                        android:scaleType="centerCrop" />

                    <ImageView
                        android:id="@+id/likeButton"
                        android:layout_width="32dp"
                        android:layout_height="32dp"
                        android:layout_gravity="bottom|end"
                        android:layout_margin="6dp"
                        android:background="@drawable/profile_background"
                        android:padding="4dp"
                        android:src="@drawable/disheart"
                        android:contentDescription="Like"
                        android:scaleType="centerInside" />
                </FrameLayout>

                    <!-- User Info -->
                        <TextView
                            android:id="@+id/userName"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Sanjaya Rajbhandari"
                            android:textColor="@color/white"
                            android:textSize="18sp"
                            android:textStyle="bold" />

                        <TextView
                            android:id="@+id/userLocation"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Bharatpur-4, Chitwan"
                            android:textColor="@color/white"
                            android:textSize="12sp"
                            android:layout_marginStart="8dp" />

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:layout_marginTop="-5dp"
                        android:gravity="center">

                        <TextView
                            android:id="@+id/postsCount"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="2 Posts"
                            android:textColor="@color/white"
                            android:textSize="12sp" />

                        <TextView
                            android:id="@+id/likesCount"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="   56 Likes"
                            android:textColor="@color/white"
                            android:textSize="12sp" />
                    </LinearLayout>

                    <!-- User Description -->
                    <TextView
                        android:id="@+id/userDescription"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="10dp"
                        android:layout_marginRight="10dp"
                        android:layout_marginBottom="8dp"
                        android:text="Hi, I'm Sanjaya Rajbhandari from Chitwan, currently working at Bihani Tech and pursuing my BCA at Oxford College of Engineering and Management. I'm passionate about digital innovation, especially in tech and marketing."
                        android:textColor="@color/white"
                        android:textSize="12sp"
                        android:layout_marginTop="2dp"
                        android:gravity="center" />
                </LinearLayout>
            </RelativeLayout>

        </com.google.android.material.appbar.CollapsingToolbarLayout>

        <!-- Sticky Category Filters -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:background="@color/white"
            app:layout_scrollFlags="scroll|enterAlways">

            <!-- First Row of Filters -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:paddingHorizontal="16dp"
                android:paddingBottom="8dp"
                android:paddingTop="12dp">

                <TextView
                    android:id="@+id/filterAll"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="All"
                    android:textAlignment="center"
                    android:textColor="@color/white"
                    android:background="@drawable/rounded_button_blue"
                    android:paddingHorizontal="16dp"
                    android:paddingVertical="6dp"
                    android:layout_marginEnd="8dp"
                    android:textSize="12sp" />

                <TextView
                    android:id="@+id/filterRoad"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="Road"
                    android:textAlignment="center"
                    android:textColor="@color/black"
                    android:background="@drawable/rounded_button_grey"
                    android:paddingHorizontal="16dp"
                    android:paddingVertical="6dp"
                    android:layout_marginEnd="8dp"
                    android:textSize="12sp" />

                <TextView
                    android:id="@+id/filterElectricity"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="Electricity"
                    android:textAlignment="center"
                    android:textColor="@color/black"
                    android:background="@drawable/rounded_button_grey"
                    android:paddingHorizontal="16dp"
                    android:paddingVertical="6dp"
                    android:layout_marginEnd="8dp"
                    android:textSize="11.5sp" />

                <TextView
                    android:id="@+id/filterSanitary"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="Sanitary"
                    android:textAlignment="center"
                    android:textColor="@color/black"
                    android:background="@drawable/rounded_button_grey"
                    android:paddingHorizontal="16dp"
                    android:paddingVertical="6dp"
                    android:textSize="12sp" />
            </LinearLayout>

            <!-- Second Row of Filters -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:paddingHorizontal="16dp"
                android:paddingBottom="12dp">

                <TextView
                    android:id="@+id/filterWater"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="Water"
                    android:textAlignment="center"
                    android:textColor="@color/black"
                    android:background="@drawable/rounded_button_grey"
                    android:paddingHorizontal="16dp"
                    android:paddingVertical="6dp"
                    android:layout_marginEnd="8dp"
                    android:textSize="12sp" />

                <TextView
                    android:id="@+id/filterLights"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="Lights"
                    android:textAlignment="center"
                    android:textColor="@color/black"
                    android:background="@drawable/rounded_button_grey"
                    android:paddingHorizontal="16dp"
                    android:paddingVertical="6dp"
                    android:layout_marginEnd="8dp"
                    android:textSize="12sp" />

                <TextView
                    android:id="@+id/filterMore1"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="Events"
                    android:textAlignment="center"
                    android:textColor="@color/black"
                    android:background="@drawable/rounded_button_grey"
                    android:paddingHorizontal="16dp"
                    android:paddingVertical="6dp"
                    android:layout_marginEnd="8dp"
                    android:textSize="12sp" />

                <TextView
                    android:id="@+id/filterMore2"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="More"
                    android:textAlignment="center"
                    android:textColor="@color/black"
                    android:background="@drawable/rounded_button_grey"
                    android:paddingHorizontal="16dp"
                    android:paddingVertical="6dp"
                    android:textSize="12sp" />
            </LinearLayout>
        </LinearLayout>

    </com.google.android.material.appbar.AppBarLayout>

    <!-- Scrollable Posts Content -->
    <androidx.core.widget.NestedScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_behavior="@string/appbar_scrolling_view_behavior">

        <LinearLayout
            android:id="@+id/postsContainer"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="16dp"
            android:background="@color/white">

            <!-- Post Item 1 -->
            <!-- Replace the entire hardcoded posts section with this: -->
            <androidx.recyclerview.widget.RecyclerView
                android:id="@+id/postsRecyclerView"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="16dp"
                android:padding="16dp" />

        </LinearLayout>
    </androidx.core.widget.NestedScrollView>

</androidx.coordinatorlayout.widget.CoordinatorLayout>